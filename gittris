#!/bin/bash
#default to a directory called source in your home
HOMESRC=~/source
DSTLINK=~/.local/bin

if [ ! -d "${HOMESRC}" ];then
  mkdir "${HOMESRC}"
  echo "Created a source directory in home for you. Change the variable at the top of the script if you want it located elsewhere"
fi

if [ "${HOMESRC}/lutris/.git/config" ];then
  cd "${HOMESRC}/lutris"
  git pull
else
  echo "Lutris not found - performing first clone"
  cd "${HOMESRC}"
  git clone https://github.com/lutris/lutris.git
fi

# link lutris binary to something in our path
ln -s "${HOMESRC}/lutris/bin/lutris" "${DSTLINK}/lutris"

# Updated - found command to do this as a user. requires the installation of python3-venv
# old build used to: "sudo ./configure.sh --prefix=/usr"
if [ "${HOMESRC}/ULWGL-launcher/.git/config" ];then
  cd "${HOMESRC}/ULWGL-launcher"
  git pull --recurse-submodules
  make clean
  rm -rf ${HOMESRC}/ULWGL-launcher/usr
  ./configure.sh --user-install
  make
  make install
else
  echo "ULWGL not found - performing first clone"
  cd "${HOMESRC}"
  git clone https://github.com/Open-Wine-Components/ULWGL-launcher.git
fi
